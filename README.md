# Проект "Тестовое задание"

## О проекте

Этот учебный проект создан для тестового задания по демонстрации навыков в разработке веб-приложений.

### Техническое задание

#### Технические требования

- Python 3.8+
- Django 3+
- DRF 3.10+
- PostgreSQL 10+

  При выполнении тестового задания вы можете дополнительно использовать любые сторонние Python-библиотеки без всяких ограничений.

#### Задание

- Создайте веб-приложение с API-интерфейсом и админ-панелью.
- Создайте базу данных, используя миграции Django.

##### Требования к реализации

1. Необходимо реализовать модель сети по продаже электроники.

    Сеть должна представлять собой иерархическую структуру из трех уровней:

    - завод;
    - розничная сеть;
    - индивидуальный предприниматель.

    Каждое звено сети ссылается только на одного поставщика оборудования (не обязательно предыдущего по иерархии). Важно отметить, что уровень иерархии определяется не названием звена, а отношением к остальным элементам сети, т. е. завод всегда находится на уровне 0, а если розничная сеть относится напрямую к заводу, минуя остальные звенья, ее уровень — 1.

2. Каждое звено сети должно обладать следующими элементами:

    - Название.
    - Контакты:

      - email,
      - страна,
      - город,
      - улица,
      - номер дома.

    - Продукты:
      - название,
      - модель,
      - дата выхода продукта на рынок.
    - Поставщик (предыдущий по иерархии объект сети).
    - Задолженность перед поставщиком в денежном выражении с точностью до копеек.
    - Время создания (заполняется автоматически при создании).

3. Сделать вывод в админ-панели созданных объектов.

    На странице объекта сети добавить:

    - ссылку на «Поставщика»;
    - фильтр по названию города;
    - admin action, очищающий задолженность перед поставщиком у выбранных объектов.

4. Используя DRF, создать набор представлений:

    CRUD для модели поставщика (запретить обновление через API поля «Задолженность перед поставщиком»).

    Добавить возможность фильтрации объектов по определенной стране.

5. Настроить права доступа к API так, чтобы только активные сотрудники имели доступ к API.

### Использование сторонних библиотек

- drf-yasg  # Для документирования
- python-dotenv # Для получения переменных окружения

## Как запустить проект?

### Настройка проекта

1. Клонируйте репозиторий используя следующую команду:

   ```shell
   git clone https://github.com/vk1337-btsk/test_SP_sertification
   ```

2. Войдите в директорию проекта:

   ```shell
   cd ./test_SP_sertification/
   ```

3. Создайте файл ".env" с вашими переменными окружения по предоставленному примеру файла '.env.example'. Пояснения по каждой переменной указаны в файле.

   ```shell
   cp .env.example .env
   ```

### Запуск проекта

1. Создайте и активируйте виртуальное окружение, а также установите зависимости проекта:

   - Инструкция для работы через виртуальное окружение - poetry:

   ```shell
   poetry init
   poetry shell
   poetry install
   ```

   - Инструкция для работы через виртуальное окружение - pip:

   ```shell
   python3.11 -m venv venv           # для Linux и Mac
   python3 -m venv venv              # для Windows

   source venv/bin/activate          # для Linux и Mac
   venv/Scripts/activate.bat         # для Windows
   venv/Scripts/activate.ps1         # для Windows (Power Shell)

   pip install -r requirements.txt
   ```

2. Примените миграции:

   ```shell
   python manage.py migrate
   ```

3. Запустите проект:

- Если вы хотите запустить проект и предварительно заполнить базу данных фикстурами (тестовыми данными), предварительно введите команду:

  ```shell
  python manage.py loaddata $(ls fixtures/)
  ```

- Запустите проект:

  ```shell
  python manage.py runserver
  ```

## Использование

Для начала работы проекта перейдите по адресу: [http://127.0.0.1:8000](http://127.0.0.1:8000)

## Документация проекта

В проекте реализована документация с использованием Swagger и ReDoc:

Swagger: <http://127.0.0.1:8000/swagger/>
ReDoc: <http://127.0.0.1:8000/redoc/>
